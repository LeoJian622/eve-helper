package xyz.foolcat.eve.evehelper.infrastructure.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.scheduling.annotation.EnableAsync;
import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;

import java.util.concurrent.Executor;
import java.util.concurrent.ThreadPoolExecutor;

/**
 * @author Leojan
 * date 2021-12-10 16:57
 */

@Configuration
@EnableAsync
public class AsyncConfiguration {

    @Bean("EisMarketOrderRequestExecutor")
    public Executor doSomethingExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        // ????????????????????????????????????????????????????????????
        executor.setCorePoolSize(1);
        // ???????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
        executor.setMaxPoolSize(10);
        // ????????????????????????????????????????????????
        executor.setQueueCapacity(10);
        // ???????????????????????????0????????????????????????????????????????????????????????????????????????????????????
        executor.setKeepAliveSeconds(20);
        // ????????????????????????????????????????????????????????????????????????????????????????????????
        executor.setThreadNamePrefix("esi-order-");
        // ???????????????????????????????????????????????????????????????????????????????????????
        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.DiscardPolicy());
        executor.initialize();
        return executor;
    }

}
